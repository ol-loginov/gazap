<!DOCTYPE html>
${param gazap.site.web.views.user.UserProfilePage content}
${param gazap.site.web.extensions.CdnExtension eCdn}
${param gazap.site.web.extensions.VisitorExtension eVisitor}
${set sc=eCdn.contextPath}
<html>
${include("../shared/html-head.jsp")}
<body class="brand-with-menu">
<div id="leftPane">
    ${include("shared/html-bars-brand.html")}
    ${include("shared/html-bars-account.html")}
</div>
<div id="mainColumn" class="profile-page">
    <h1 class="accountName">
        ${if(content.user.name.length eq 0)}
        <span class="noname">${l18n:t('UserProfilePage.user.noName')}</span>
        ${else}
        ${content.user.name}
        ${if}
    </h1>
    <hr class="clear"/>

    <section id="accountMaps">
        <h3>
            ${l18n:t('UserProfilePage.accountMaps.h')}
            <span class="actions">
                <lt:secured-action visitorNeeded="${content.user.id}" action="map.create">
                    <a id="createMap" class=" btn-mini" href="${sc}/map/create">создать карту</a>
                </lt:secured-action>
            </span>
        </h3>

        ${if(not o:empty(content.maps))}
        <ul class="list">
            ${for(map : content.maps)}
            <li>
                ${include('../shared/partial-map-title.html',map,mapRoles=content.mapRoles.get(map.id))}
            </li>
            ${for}
        </ul>
        ${else}
        <p class="empty">
            ${l18n:t('UserProfilePage.accountMaps.empty')}
        </p>
        ${if}
    </section>

    <section id="accountGames">
        <h3>
            ${l18n:t('UserProfilePage.accountGames.h')}
        </h3>

        ${if(not o:empty(content.games))}
        <ul class="list">
            ${for(e : content.games)}
            <li>
                <div class="game-title">
                    <h4>
                        <a href="${sc}${e.route}">
                            <span class="breakword">${e.title}</span>
                        </a>
                    </h4>
                    <span class="game-flags">
                    ${for(gr : content.gameRoles.values)}
                        ${if(gr.game eq e.id)}
                            <span class="game-role ${gr.role}">
                                <i class="gameroleicon"></i>
                                ${l18n:t(s:concat('UserGameRoles.', gr.role, '.flag')}
                            </span>
                        ${if}
                    ${for}
                    </span>
                </div>
            </li>
            ${for}
        </ul>
        ${else}
        <p class="empty">
            ${l18n:t('UserProfilePage.accountGames.empty')}
        </p>
        ${if}
    </section>

    <section id="accountAvatars">
        <h3>
            ${l18n:t('UserProfilePage.accountAvatars.h')}
        </h3>

        <p class="empty">
            ${l18n:t('UserProfilePage.accountAvatars.empty')}
        </p>
    </section>

    <div class="clear"></div>
</div>
</body>
</html>